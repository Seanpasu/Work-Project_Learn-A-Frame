---
layout: environment_basic
---
<a-scene xr-mode-ui="enabled: true" webxr="optionalFeatures: local-floor, bounded-floor, hand-tracking">
	<a-assets>
		<a-asset-item id="flower-obj" src="assets/models/flower/model.obj"></a-asset-item>
		<a-asset-item id="flower-mtl" src="assets/models/flower/materials.mtl"></a-asset-item>
		<a-asset-item id="koi-gltf" src="assets/models/koi/scene.gltf"></a-asset-item>
	</a-assets>

	<!-- Add Hand models for tracking visualization -->
	<a-camera>
		<a-entity id="left-hand" hand-tracking="hand: left" raycaster="objects: .clickable; showline: true; lineColor: rgba(173, 216, 230, 0.5)" position="0 1 -2" gesture-listener="hand: left"></a-entity>
		<a-entity id="right-hand" hand-tracking="hand: right" raycaster="objects: .clickable; showline: true; lineColor: rgba(173, 216, 230, 0.5)" position="0 1 -2" gesture-listener="hand: right"></a-entity>
	</a-camera>

	<!-- Floor and skybox -->
	<a-plane position="0 0 0" rotation="-90 0 0" src="url(assets/textures/grass/Seamless green grass vector pattern.jpg)" material="repeat: 10 10;" height="10" width="10"></a-plane>
	<a-sky color="#ECECEC"></a-sky>

	<!-- Overly basic obj entity -->
	<a-entity obj-model="obj: #flower-obj; mtl: #flower-mtl" position="-2 0.1 -2" rotation="0 146 0" scale="0.1 0.1 0.1"></a-entity>

	<!-- gltf entities -->
	<a-entity gltf-model="#koi-gltf" position="0 0.5 -1.2" rotation="0 -90 0" scale="0.08 0.08 0.08" animation-mixer></a-entity>

	<script>
	AFRAME.registerComponent("gesture-listener", {
		schema: {
			hand: { type: "string" }
		},
		init: function () {
			this.el.addEventListener('hand-tracking-updated', (event) => {
				const handData = event.detail.hand;

				// pointing gesture
				const isPointing = handData.fingers[1].extended && handData.fingers.slice(2).every(finger => !finger.extended);

				if (isPointing) {	// Enable clicking and make line opaque when pointing
					this.el.setAttribute("raycaster", "enabled", true);
					this.el.setAttribute("line", "color", "rgba(0, 255, 0, 1)");
				} else {	// Disable clicking and make line transparent when not pointing
					this.el.setAttribute("raycaster", "enabled", false);
					this.el.setAttribute("line", "color", "rgba(173, 216, 20, 0.5)")
				}
			});
		}
	});

</a-scene>
